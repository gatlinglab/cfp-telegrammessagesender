const c_uploadEndPoint = '/uploadphoto'
function _(e){return document.getElementById(e)}function niceBytes(i){let B=0,e=parseInt(i,10)||0;for(;e>=1024&&++B;)e/=1024;return e.toFixed(e<10&&B>0?1:0)+" "+["bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][B]}function uploadFile(){_("result").style.display="block";var e=_("file").files[0],r=new FormData;r.append("file",e);var a=new XMLHttpRequest;a.upload.addEventListener("progress",progressHandler,!1),a.addEventListener("load",completeHandler,!1),a.addEventListener("error",errorHandler,!1),a.addEventListener("abort",abortHandler,!1),a.open("POST",c_uploadEndPoint),a.send(r)}function progressHandler(e){_("loaded_n_total").innerHTML="Uploaded "+e.loaded+" bytes of "+e.total;var r=e.loaded/e.total*100,a=Math.round(r)+"%";_("progressBar").innerHTML=a,_("progressBar").style.width=a,_("status").innerHTML=Math.round(r)+"% uploaded... please wait"}function completeHandler(e){var r=JSON.parse(e.target.responseText);_("status").innerHTML="<b>Name:</b> "+r.name+"<br><b>Size:</b> "+niceBytes(r.size)+"<br><b>Hash:</b> "+r.hash+"<br><hr>"}function errorHandler(e){_("status").innerHTML="Upload Failed"}function abortHandler(e){_("status").innerHTML="Upload Aborted"}

